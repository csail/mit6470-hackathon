/*
* Slides, A Slideshow Plugin for jQuery
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Version: 1.1.9
* Updated: September 5th, 2011
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(e){e.fn.slides=function(t){return t=e.extend({},e.fn.slides.option,t),this.each(function(){function n(n,r,i){if(!w&&y){w=!0,t.animationStart(g+1);switch(n){case"next":v=g,d=g+1,d=u===d?0:d,S=f*2,n=-f*2,g=d;break;case"prev":v=g,d=g-1,d=d===-1?u-1:d,S=0,n=0,g=d;break;case"pagination":d=parseInt(i,10),v=e("."+t.paginationClass+" li."+t.currentClass+" a",s).attr("href").match("[^#/]+$"),d>v?(S=f*2,n=-f*2):(S=0,n=0),g=d}r==="fade"?t.crossfade?o.children(":eq("+d+")",s).css({zIndex:10}).fadeIn(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?o.animate({height:o.children(":eq("+d+")",s).outerHeight()},t.autoHeightSpeed,function(){o.children(":eq("+v+")",s).css({display:"none",zIndex:0}),o.children(":eq("+d+")",s).css({zIndex:0}),t.animationComplete(d+1),w=!1}):(o.children(":eq("+v+")",s).css({display:"none",zIndex:0}),o.children(":eq("+d+")",s).css({zIndex:0}),t.animationComplete(d+1),w=!1)}):o.children(":eq("+v+")",s).fadeOut(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?o.animate({height:o.children(":eq("+d+")",s).outerHeight()},t.autoHeightSpeed,function(){o.children(":eq("+d+")",s).fadeIn(t.fadeSpeed,t.fadeEasing)}):o.children(":eq("+d+")",s).fadeIn(t.fadeSpeed,t.fadeEasing,function(){e.browser.msie&&e(this).get(0).style.removeAttribute("filter")}),t.animationComplete(d+1),w=!1}):(o.children(":eq("+d+")").css({left:S,display:"block"}),t.autoHeight?o.animate({left:n,height:o.children(":eq("+d+")").outerHeight()},t.slideSpeed,t.slideEasing,function(){o.css({left:-f}),o.children(":eq("+d+")").css({left:f,zIndex:5}),o.children(":eq("+v+")").css({left:f,display:"none",zIndex:0}),t.animationComplete(d+1),w=!1}):o.animate({left:n},t.slideSpeed,t.slideEasing,function(){o.css({left:-f}),o.children(":eq("+d+")").css({left:f,zIndex:5}),o.children(":eq("+v+")").css({left:f,display:"none",zIndex:0}),t.animationComplete(d+1),w=!1})),t.pagination&&(e("."+t.paginationClass+" li."+t.currentClass,s).removeClass(t.currentClass),e("."+t.paginationClass+" li:eq("+d+")",s).addClass(t.currentClass))}}function r(){clearInterval(s.data("interval"))}function i(){t.pause?(clearTimeout(s.data("pause")),clearInterval(s.data("interval")),N=setTimeout(function(){clearTimeout(s.data("pause")),C=setInterval(function(){n("next",h)},t.play),s.data("interval",C)},t.pause),s.data("pause",N)):r()}e("."+t.container,e(this)).children().wrapAll('<div class="slides_control"/>');var s=e(this),o=e(".slides_control",s),u=o.children().size(),f=o.children().outerWidth(),l=o.children().outerHeight(),c=t.start-1,h=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],p=t.effect.indexOf(",")<0?h:t.effect.replace(" ","").split(",")[1],d=0,v=0,m=0,g=0,y,w,E,S,x,T,N,C;if(u<2)return e("."+t.container,e(this)).fadeIn(t.fadeSpeed,t.fadeEasing,function(){y=!0,t.slidesLoaded()}),e("."+t.next+", ."+t.prev).fadeOut(0),!1;if(u<2)return;c<0&&(c=0),c>u&&(c=u-1),t.start&&(g=c),t.randomize&&o.randomize(),e("."+t.container,s).css({overflow:"hidden",position:"relative"}),o.children().css({position:"absolute",top:0,left:o.children().outerWidth(),zIndex:0,display:"none"}),o.css({position:"relative",width:f*3,height:l,left:-f}),e("."+t.container,s).css({display:"block"}),t.autoHeight&&(o.children().css({height:"auto"}),o.animate({height:o.children(":eq("+c+")").outerHeight()},t.autoHeightSpeed));if(t.preload&&o.find("img:eq("+c+")").length){e("."+t.container,s).css({background:"url("+t.preloadImage+") no-repeat 50% 50%"});var k=o.find("img:eq("+c+")").attr("src")+"?"+(new Date).getTime();e("img",s).parent().attr("class")!="slides_control"?T=o.children(":eq(0)")[0].tagName.toLowerCase():T=o.find("img:eq("+c+")"),o.find("img:eq("+c+")").attr("src",k).load(function(){o.find(T+":eq("+c+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){e(this).css({zIndex:5}),e("."+t.container,s).css({background:""}),y=!0,t.slidesLoaded()})})}else o.children(":eq("+c+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){y=!0,t.slidesLoaded()});t.bigTarget&&(o.children().css({cursor:"pointer"}),o.children().click(function(){return n("next",h),!1})),t.hoverPause&&t.play&&(o.bind("mouseover",function(){r()}),o.bind("mouseleave",function(){i()})),t.generateNextPrev&&(e("."+t.container,s).after('<a href="#" class="'+t.prev+'">Prev</a>'),e("."+t.prev,s).after('<a href="#" class="'+t.next+'">Next</a>')),e("."+t.next,s).click(function(e){e.preventDefault(),t.play&&i(),n("next",h)}),e("."+t.prev,s).click(function(e){e.preventDefault(),t.play&&i(),n("prev",h)}),t.generatePagination?(t.prependPagination?s.prepend("<ul class="+t.paginationClass+"></ul>"):s.append("<ul class="+t.paginationClass+"></ul>"),o.children().each(function(){e("."+t.paginationClass,s).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>"),m++})):e("."+t.paginationClass+" li a",s).each(function(){e(this).attr("href","#"+m),m++}),e("."+t.paginationClass+" li:eq("+c+")",s).addClass(t.currentClass),e("."+t.paginationClass+" li a",s).click(function(){return t.play&&i(),E=e(this).attr("href").match("[^#/]+$"),g!=E&&n("pagination",p,E),!1}),e("a.link",s).click(function(){return t.play&&i(),E=e(this).attr("href").match("[^#/]+$")-1,g!=E&&n("pagination",p,E),!1}),t.play&&(C=setInterval(function(){n("next",h)},t.play),s.data("interval",C))})},e.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},e.fn.randomize=function(t){function n(){return Math.round(Math.random())-.5}return e(this).each(function(){var r=e(this),s=r.children(),o=s.length;if(o>1){s.hide();var u=[];for(i=0;i<o;i++)u[u.length]=i;u=u.sort(n),e.each(u,function(e,n){var i=s.eq(n),o=i.clone(!0);o.show().appendTo(r),t!==undefined&&t(i,o),i.remove()})}})}})(jQuery);